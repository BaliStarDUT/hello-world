{"version":3,"sources":["pages/board/board.js"],"names":["Promise","require","app","getApp","Page","data","boards","key","loading","onLoad","promises","map","douban","find","board","then","title","d","movies","subjects","all","setData","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":";;AAAA;AACA,IAAMA,UAAUC,QAAQ,sBAAR,CAAhB;AACA,IAAMC,MAAMC,QAAZ;;AAEA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,YAAQ,CACN,EAAEC,KAAK,aAAP,EADM,EAEN,EAAEA,KAAK,aAAP,EAFM,EAGN,EAAEA,KAAK,QAAP;AACA;AACA;AACA;AANM,KADJ;AASJC,aAAS;AATL,GAJH;;AAgBH;;;AAGAC,QAnBG,oBAmBO;AAAA;;AACR,QAAMC,WAAW,KAAKL,IAAL,CAAUC,MAAV,CAAiBK,GAAjB,CAAqB,iBAAS;AAC7C,aAAOT,IAAIU,MAAJ,CAAWC,IAAX,CAAgBC,MAAMP,GAAtB,EAA2B,CAA3B,EAA8B,EAA9B,EACJQ,IADI,CACC,aAAK;AACTD,cAAME,KAAN,GAAcC,EAAED,KAAhB;AACAF,cAAMI,MAAN,GAAeD,EAAEE,QAAjB;AACA,eAAOL,KAAP;AACD,OALI,CAAP;AAMD,KAPgB,CAAjB;AAQAd,YAAQoB,GAAR,CAAYV,QAAZ,EAAsBK,IAAtB,CAA2B;AAAA,aAAU,MAAKM,OAAL,CAAa,EAAEf,QAAQA,MAAV,EAAkBE,SAAS,KAA3B,EAAb,CAAV;AAAA,KAA3B;AACD,GA7BE;;;AA+BH;;;AAGAc,SAlCG,qBAkCQ;AACT;AACD,GApCE;;;AAsCH;;;AAGAC,QAzCG,oBAyCO;AACR;AACD,GA3CE;;;AA6CH;;;AAGAC,QAhDG,oBAgDO;AACR;AACD,GAlDE;;;AAoDH;;;AAGAC,UAvDG,sBAuDS;AACV;AACD,GAzDE;;;AA2DH;;;AAGAC,mBA9DG,+BA8DkB;AACnB;AACD;AAhEE,CAAL","file":"board.js","sourcesContent":["// 获取全局应用程序实例对象\nconst Promise = require('../../utils/bluebird')\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    boards: [\n      { key: 'in_theaters' },\n      { key: 'coming_soon' },\n      { key: 'top250' }\n      // { key: 'weekly' },\n      // { key: 'new_movies' },\n      // { key: 'us_box', name: '北美票房榜' }\n    ],\n    loading: true\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    const promises = this.data.boards.map(board => {\n      return app.douban.find(board.key, 1, 10)\n        .then(d => {\n          board.title = d.title\n          board.movies = d.subjects\n          return board\n        })\n    })\n    Promise.all(promises).then(boards => this.setData({ boards: boards, loading: false }))\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}